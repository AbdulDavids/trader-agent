{"openapi":"3.1.0","info":{"title":"AI Stock Analysis API","description":"A microservice for AI-powered stock and cryptocurrency analysis using yfinance and GPT-4o-mini","version":"1.0.0"},"paths":{"/api/v1/stocks/{symbol}":{"get":{"tags":["stocks"],"summary":"Get Stock","description":"Get individual stock/crypto data with historical prices and technical indicators.","operationId":"get_stock_api_v1_stocks__symbol__get","parameters":[{"name":"symbol","in":"path","required":true,"schema":{"type":"string","title":"Symbol"}},{"name":"market","in":"query","required":false,"schema":{"type":"string","description":"Market type: US, ZA, or CRYPTO","default":"US","title":"Market"},"description":"Market type: US, ZA, or CRYPTO"},{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period for historical data","default":"1mo","title":"Period"},"description":"Time period for historical data"},{"name":"interval","in":"query","required":false,"schema":{"type":"string","description":"Data interval","default":"1d","title":"Interval"},"description":"Data interval"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stocks/search":{"get":{"tags":["stocks"],"summary":"Search Stocks","description":"Search for stocks/crypto by name or ticker symbol.","operationId":"search_stocks_api_v1_stocks_search_get","parameters":[{"name":"query","in":"query","required":true,"schema":{"type":"string","minLength":1,"description":"Search query (company name or ticker)","title":"Query"},"description":"Search query (company name or ticker)"},{"name":"market","in":"query","required":false,"schema":{"type":"string","description":"Market filter: US, ZA, CRYPTO, or ALL","default":"ALL","title":"Market"},"description":"Market filter: US, ZA, CRYPTO, or ALL"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"description":"Maximum number of results","default":10,"title":"Limit"},"description":"Maximum number of results"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stocks/batch":{"post":{"tags":["stocks"],"summary":"Get Batch Stocks","description":"Fetch multiple stocks in one request.","operationId":"get_batch_stocks_api_v1_stocks_batch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchStockRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BatchStockResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stocks/markets/status":{"get":{"tags":["stocks"],"summary":"Get Market Status","description":"Get current market status for different exchanges.","operationId":"get_market_status_api_v1_stocks_markets_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/analysis/{symbol}":{"get":{"tags":["analysis"],"summary":"Get Stock Analysis","description":"Get AI-powered analysis for a stock/crypto with BUY/HOLD/SELL recommendation.","operationId":"get_stock_analysis_api_v1_analysis__symbol__get","parameters":[{"name":"symbol","in":"path","required":true,"schema":{"type":"string","title":"Symbol"}},{"name":"market","in":"query","required":false,"schema":{"type":"string","description":"Market type: US, ZA, or CRYPTO","default":"US","title":"Market"},"description":"Market type: US, ZA, or CRYPTO"},{"name":"analysis_type","in":"query","required":false,"schema":{"type":"string","description":"Analysis type: technical, fundamental, sentiment, comprehensive","default":"comprehensive","title":"Analysis Type"},"description":"Analysis type: technical, fundamental, sentiment, comprehensive"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StockAnalysis"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/compare":{"post":{"tags":["analysis"],"summary":"Compare Stocks","description":"Compare two or more stocks and provide investment recommendation.","operationId":"compare_stocks_api_v1_analysis_compare_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompareRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ComparisonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/portfolio":{"post":{"tags":["analysis"],"summary":"Analyze Portfolio","description":"Analyze a portfolio of holdings and provide recommendations.","operationId":"analyze_portfolio_api_v1_analysis_portfolio_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortfolioRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortfolioAnalysis"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/analysis/health":{"get":{"tags":["analysis"],"summary":"Analysis Health Check","description":"Health check endpoint for analysis service.","operationId":"analysis_health_check_api_v1_analysis_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint with API information.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AnalysisPoint":{"properties":{"category":{"type":"string","enum":["technical","fundamental","market","risk"],"title":"Category"},"point":{"type":"string","maxLength":200,"title":"Point"},"sentiment":{"type":"string","enum":["positive","negative","neutral"],"title":"Sentiment"}},"type":"object","required":["category","point","sentiment"],"title":"AnalysisPoint"},"BatchStockRequest":{"properties":{"symbols":{"items":{"type":"string"},"type":"array","title":"Symbols"},"period":{"type":"string","title":"Period","default":"1mo"},"interval":{"type":"string","title":"Interval","default":"1d"}},"type":"object","required":["symbols"],"title":"BatchStockRequest"},"BatchStockResponse":{"properties":{"stocks":{"items":{"$ref":"#/components/schemas/StockData"},"type":"array","title":"Stocks"}},"type":"object","required":["stocks"],"title":"BatchStockResponse"},"CompareRequest":{"properties":{"symbols":{"items":{"type":"string"},"type":"array","maxItems":5,"minItems":2,"title":"Symbols"},"metrics":{"items":{"type":"string","enum":["performance","valuation","growth","risk"]},"type":"array","title":"Metrics","default":["performance","valuation"]}},"type":"object","required":["symbols"],"title":"CompareRequest"},"ComparisonResponse":{"properties":{"comparison":{"items":{"$ref":"#/components/schemas/ComparisonResult"},"type":"array","title":"Comparison"},"winner":{"type":"string","title":"Winner"},"reasoning":{"items":{"type":"string"},"type":"array","title":"Reasoning"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["comparison","winner","reasoning","timestamp"],"title":"ComparisonResponse"},"ComparisonResult":{"properties":{"symbol":{"type":"string","title":"Symbol"},"score":{"type":"number","maximum":10.0,"minimum":0.0,"title":"Score"},"strengths":{"items":{"type":"string"},"type":"array","title":"Strengths"},"weaknesses":{"items":{"type":"string"},"type":"array","title":"Weaknesses"}},"type":"object","required":["symbol","score","strengths","weaknesses"],"title":"ComparisonResult"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoricalDataPoint":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"open":{"type":"number","title":"Open"},"high":{"type":"number","title":"High"},"low":{"type":"number","title":"Low"},"close":{"type":"number","title":"Close"},"volume":{"type":"integer","title":"Volume"}},"type":"object","required":["timestamp","open","high","low","close","volume"],"title":"HistoricalDataPoint"},"PortfolioAnalysis":{"properties":{"total_value":{"type":"number","title":"Total Value"},"total_gain_loss":{"type":"number","title":"Total Gain Loss"},"gain_loss_percent":{"type":"number","title":"Gain Loss Percent"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations"},"rebalancing_suggestions":{"items":{"type":"string"},"type":"array","title":"Rebalancing Suggestions"},"risk_assessment":{"type":"string","title":"Risk Assessment"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["total_value","total_gain_loss","gain_loss_percent","recommendations","rebalancing_suggestions","risk_assessment","timestamp"],"title":"PortfolioAnalysis"},"PortfolioHolding":{"properties":{"symbol":{"type":"string","title":"Symbol"},"quantity":{"type":"number","exclusiveMinimum":0.0,"title":"Quantity"},"purchase_price":{"type":"number","exclusiveMinimum":0.0,"title":"Purchase Price"}},"type":"object","required":["symbol","quantity","purchase_price"],"title":"PortfolioHolding"},"PortfolioRequest":{"properties":{"holdings":{"items":{"$ref":"#/components/schemas/PortfolioHolding"},"type":"array","minItems":1,"title":"Holdings"}},"type":"object","required":["holdings"],"title":"PortfolioRequest"},"PriceTargets":{"properties":{"bearish":{"type":"number","exclusiveMinimum":0.0,"title":"Bearish"},"neutral":{"type":"number","exclusiveMinimum":0.0,"title":"Neutral"},"bullish":{"type":"number","exclusiveMinimum":0.0,"title":"Bullish"}},"type":"object","required":["bearish","neutral","bullish"],"title":"PriceTargets"},"StockAnalysis":{"properties":{"symbol":{"type":"string","title":"Symbol"},"market":{"type":"string","enum":["US","ZA","CRYPTO"],"title":"Market"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"recommendation":{"type":"string","enum":["BUY","HOLD","SELL"],"title":"Recommendation"},"confidence_score":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence Score"},"target_price":{"type":"number","title":"Target Price"},"analysis_summary":{"type":"string","title":"Analysis Summary"},"key_points":{"items":{"$ref":"#/components/schemas/AnalysisPoint"},"type":"array","title":"Key Points"},"price_targets":{"$ref":"#/components/schemas/PriceTargets"},"risks":{"items":{"type":"string"},"type":"array","title":"Risks"},"opportunities":{"items":{"type":"string"},"type":"array","title":"Opportunities"}},"type":"object","required":["symbol","market","timestamp","recommendation","confidence_score","target_price","analysis_summary","key_points","price_targets"],"title":"StockAnalysis"},"StockData":{"properties":{"symbol":{"type":"string","title":"Symbol"},"market":{"type":"string","enum":["US","ZA","CRYPTO"],"title":"Market"},"company_name":{"type":"string","title":"Company Name"},"current_price":{"type":"number","title":"Current Price"},"currency":{"type":"string","title":"Currency"},"change_percent":{"type":"number","title":"Change Percent"},"volume":{"type":"integer","title":"Volume"},"market_cap":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Market Cap"},"pe_ratio":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Pe Ratio"},"dividend_yield":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Dividend Yield"},"historical_data":{"items":{"$ref":"#/components/schemas/HistoricalDataPoint"},"type":"array","title":"Historical Data"},"technical_indicators":{"$ref":"#/components/schemas/TechnicalIndicators"},"fifty_two_week_high":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Fifty Two Week High"},"fifty_two_week_low":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Fifty Two Week Low"},"average_volume":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Average Volume"},"price_changes":{"type":"object","title":"Price Changes"}},"type":"object","required":["symbol","market","company_name","current_price","currency","change_percent","volume","historical_data","technical_indicators"],"title":"StockData"},"StockSearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/StockSearchResult"},"type":"array","title":"Results"}},"type":"object","required":["results"],"title":"StockSearchResponse"},"StockSearchResult":{"properties":{"symbol":{"type":"string","title":"Symbol"},"name":{"type":"string","title":"Name"},"market":{"type":"string","enum":["US","ZA","CRYPTO"],"title":"Market"},"sector":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sector"}},"type":"object","required":["symbol","name","market"],"title":"StockSearchResult"},"TechnicalIndicators":{"properties":{"rsi":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Rsi","description":"14-period RSI"},"sma_20":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sma 20","description":"20-day Simple Moving Average"},"sma_50":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sma 50","description":"50-day Simple Moving Average"},"sma_200":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Sma 200","description":"200-day Simple Moving Average"},"macd":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Macd","description":"MACD line"},"macd_signal":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Macd Signal","description":"MACD signal line"},"macd_histogram":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Macd Histogram","description":"MACD histogram"}},"type":"object","title":"TechnicalIndicators"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}